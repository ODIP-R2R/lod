@prefix dc:      <http://purl.org/dc/elements/1.1/> .
@prefix dct:	 <http://purl.org/dc/terms/> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix dbpedia: <http://dbpedia.org/ontology#> .

# Linked Data API prefixes

@prefix api:     <http://purl.org/linked-data/api/vocab#> .
@prefix extras: <http://www.epimorphics.com/vocabularies/lda#> .

# R2R prefixes

@prefix r2r:	<http://escience.rpi.edu/ontology/r2r/r2r#> .
@prefix spec:	<http://r2r.tw.rpi.edu/spec/r2r#> .

spec:api
	a api:API;
	rdfs:label "R2R Vocabulary Service"@en;
	rdfs:comment "A prototype Vocabulary Service for R2R Project"@en;
	api:sparqlEndpoint <http://data.rvdata.us/sparql>;
	api:base "http://r2r.tw.rpi.edu/standalone/r2r";
	extras:enableETags true;
	api:defaultPageSize "40"^^xsd:integer;
	api:viewer
		api:describeViewer,
		api:labelledDescribeViewer;
	api:defaultViewer api:labelledDescribeViewer;
	api:defaultFormatter spec:htmlFormatter;
	api:endpoint
		spec:listClasses,
		spec:listVessels,
		spec:listVesselsByLabelContains;
	api:variable
		[api:name "base"; api:value "http://data.rvdata.us/id"],
		[api:name "r2r"; api:value "http://data.rvdata.us/vocab/id/class"],
		[api:name "olvessel"; api:value "http://schema.oceanlink.org/vessel"],
		[api:name "webapp"; api:value "/standalone"],
		[api:name "_suppress_ipto"; api:value "yes"],
		[api:name "_strip_has"; api:value "yes"] ;
	.

# FORMATTERS

spec:htmlFormatter
	a api:XsltFormatter;
	api:name "html";
	api:mimeType "text/html; charset=utf-8";
	api:stylesheet "lda-assets/xslt/r2r.xsl";
	.

# VIEWERS

# ENDPOINTS

spec:listClasses	# not working
	a api:ListEndpoint;
	api:uriTemplate "/classes";
	api:exampleRequestPath "/classes";
	api:selector [
		api:where """?i rdf:type ?item.""";
		api:orderBy "?item";
	];
	.

spec:listVessels
	a api:ListEndpoint;
	api:uriTemplate "/vessels";
	api:exampleRequestPath "/vessels";
	api:variable [
		api:name "vessels";
		api:value "{olvessel}#Vessel";
		api:type rdfs:Resource;
	];
	api:selector [
		api:where """ ?item rdf:type ?vessels . 
					  ?item rdfs:label ?label . """;
		api:orderBy "?label";
	];
	.

spec:listVesselsByLabelContains
	a api:ListEndpoint;
	api:exampleRequestPath "/vessels?labelContains=atlantis";
	api:uriTemplate "/vessels?labelContains={text}";
	api:variable [ 
		api:name "vessels";
		api:value "{olvessel}#Vessel";
		api:type rdfs:Resource;
	] ;
	api:selector [
			api:where
				""" ?item rdf:type ?vessels .
					?item rdfs:label ?label .
					FILTER regex( str(?label) , ?text , 'i' ) """;
			api:orderBy "?label";
	] ;
	.

# properties definitions with labels

rdfs:label
	a rdf:Property;
	api:label "label";
	.

skos:prefLabel
	a rdf:Property;
	api:label "prefLabel";
	.

skos:altLabel
	a rdf:Property;
	api:label "altLabel";
	.

skos:narrower
	a rdf:Property;
	api:label "narrower";
	.

skos:narrowerTransitive
	a rdf:Property;
	api:label "narrowerTransitive";
	.

skos:narrowMatch
	a rdf:Property;
	api:label "narrowMatch";
	.

skos:broader
	a rdf:Property;
	api:label "broader";
	.

skos:broaderTransitive
	a rdf:Property;
	api:label "broaderTransitive";
	.

skos:broadMatch
	a rdf:Property;
	api:label "broadMatch";
	.

skos:related
	a rdf:Property;
	api:label "related";
	.

skos:relatedMatch
	a rdf:Property;
	api:label "relatedMatch";
	.

skos:closeMatch
	a rdf:Property;
	api:label "closeMatch";
	.

skos:exactMatch
	a rdf:Property;
	api:label "exactMatch";
	.

skos:inScheme
	a rdf:Property;
	api:label "inScheme";
	.

skos:definition
	a rdf:Property;
	api:label "definition";
	.
	
skos:notation
	a rdf:Property;
	api:label "notation";
	.

dct:subject
	a rdf:Property;
	api:label "subject";
	.

